# PostgreSQL Database for the Mugen Project

## Index
- [Docs](#docs)
- [Filesystem Structure](#filesystem-structure)
- [Runing CLI Interface](#runing-cli-interface)
- [Runing Tests](#runing-tests)
- [Making Tests](#making-async-tests)

## Docs
Docs and Guidelines can be found at `docs/`
- [Coding Guidelines](./docs/CODING_GUIDELINES.md)
- [Contributing Guideliness](./docs/PULL_REQUEST_GUIDELINES.md)
- [Database ERE Model](./docs/mugen_ere.jpg)
- [Databse Files Structure](./docs/DATABASE_STRUCTURE.md)

## Filesystem Structure

The project is structured as a multi-purpose Python library. All library code must go inside the `mugennodb/` directory.

Code that should **not** be included in the library — such as scripts, UIs, or service entry points — should be placed in the `app/` directory.

All test code must go inside the `tests/` directory.

Tests should follow a naming convention based on the file being tested.  
For example, the file:

`mugennodb/database/interface/api.py`

Should have a corresponding test file named:

`tests/database/interface/api_test.py`

The `dist/` directory contains the build output generated by Poetry.
It is used for publishing the package to PyPI.

## Runing cli interface
This project uses Poetry for dependency management and CLI execution.

To run the CLI app (using Typer) from the command line:

```bash
poetry run python app/main.py [COMMAND] [OPTIONS]
```

Make sure you are inside the project root directory and dependencies are installed via:

```bash
poetry install
```

## Runing Tests

All tests are located in the `tests/` directory.
We use pytest and pytest-asyncio to run asynchronous test cases.

To run the entire test suite:

```bash
poetry run pytest
```

To run a specific test file:
```bash
poetry run pytest tests/path/file_test.py
```

## Making async tests

All test functions must be async def and decorated with @pytest.mark.asyncio.

Write tests like:

```python
import pytest
@pytest.mark.asyncio
async def test_something():
    result = await some_async_function()
    assert result == expected
```